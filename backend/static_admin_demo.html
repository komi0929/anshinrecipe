<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anshin Recipe Admin Dashboard - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: "Noto Sans JP", system-ui, sans-serif; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-white shadow-lg">
            <div class="p-6 border-b">
                <h1 class="text-xl font-bold text-gray-900">„ÅÇ„Çì„Åó„Çì„É¨„Ç∑„Éî</h1>
                <p class="text-sm text-gray-600">Admin Dashboard</p>
            </div>
            
            <!-- Navigation -->
            <nav class="mt-6">
                <div class="px-3">
                    <button class="nav-item w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-900 bg-green-50 hover:bg-green-100">
                        üìä Overview
                    </button>
                    <button class="nav-item w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 mt-1">
                        üéØ Context
                    </button>
                    <button class="nav-item w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 mt-1">
                        ‚≠ê Quality
                    </button>
                    <button class="nav-item w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 mt-1">
                        üîÑ Funnel
                    </button>
                    <button class="nav-item w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 mt-1">
                        üìà Extract
                    </button>
                    <button class="nav-item w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 mt-1">
                        üåê Domains
                    </button>
                </div>
            </nav>

            <!-- Date Range Picker -->
            <div class="px-6 mt-8">
                <h3 class="text-sm font-medium text-gray-700 mb-3">ÊúüÈñìÈÅ∏Êäû</h3>
                <div class="space-y-2">
                    <button class="date-btn w-full text-left px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100">
                        ÈÅéÂéª7Êó•Èñì
                    </button>
                    <button class="date-btn w-full text-left px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100">
                        ÈÅéÂéª30Êó•Èñì
                    </button>
                    <button class="date-btn w-full text-left px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100">
                        ÈÅéÂéª90Êó•Èñì
                    </button>
                </div>
                <div class="mt-4 text-xs text-gray-500">
                    ÈÅ∏ÊäûÊúüÈñì: ÈÅéÂéª7Êó•Èñì
                </div>
            </div>

            <!-- User Info -->
            <div class="absolute bottom-6 left-6 right-6">
                <div class="px-3 py-2 bg-gray-50 rounded-lg">
                    <div class="text-xs text-gray-600">„É≠„Ç∞„Ç§„É≥‰∏≠:</div>
                    <div class="text-sm font-medium text-gray-900">admin</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-auto">
            <div class="p-8">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Overview</h2>
                    <p class="text-gray-600">ÂÖ®‰ΩìÁöÑ„Å™„Ç∑„Çπ„ÉÜ„É†Ê¶ÇË¶Å„Å®„É°„Éà„É™„ÇØ„Çπ (Asia/Tokyo) - Real MongoDB Data</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- KPI Cards with Real Data -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Á∑èÊ§úÁ¥¢Êï∞</p>
                                <p class="text-2xl font-bold text-gray-900">109</p>
                            </div>
                            <div class="p-3 bg-blue-50 rounded-full">
                                <div class="w-6 h-6 text-blue-600">üîç</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„É¶„Éº„Ç∂„Éº</p>
                                <p class="text-2xl font-bold text-gray-900">109</p>
                            </div>
                            <div class="p-3 bg-green-50 rounded-full">
                                <div class="w-6 h-6 text-green-600">üë•</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">ÊàêÂäüÁéá</p>
                                <p class="text-2xl font-bold text-gray-900">56.9%</p>
                            </div>
                            <div class="p-3 bg-yellow-50 rounded-full">
                                <div class="w-6 h-6 text-yellow-600">üìä</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">„É¨„Çπ„Éù„É≥„ÇπÊôÇÈñì</p>
                                <p class="text-2xl font-bold text-gray-900">450ms</p>
                            </div>
                            <div class="p-3 bg-purple-50 rounded-full">
                                <div class="w-6 h-6 text-purple-600">‚ö°</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Metrics Row with Real Data -->
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
                    <div class="bg-white p-4 rounded-lg shadow text-center">
                        <div class="text-sm text-gray-600">Top3 CTR</div>
                        <div class="text-lg font-bold text-blue-600">28.44%</div>
                        <div class="text-xs text-gray-500 mt-1">top3_click / top3_impression</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow text-center">
                        <div class="text-sm text-gray-600">Áü≠ÊªûÂú®Áéá</div>
                        <div class="text-lg font-bold text-orange-600">13.98%</div>
                        <div class="text-xs text-gray-500 mt-1">dwell_ms<5000 / card_click</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow text-center">
                        <div class="text-sm text-gray-600">AltÁÑ°„ÇØ„É™„ÉÉ„ÇØÁéá</div>
                        <div class="text-lg font-bold text-red-600">1.83%</div>
                        <div class="text-xs text-gray-500 mt-1">alt>=2 & click=0 / sessions</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow text-center">
                        <div class="text-sm text-gray-600">ÁµêÊûú0Áéá</div>
                        <div class="text-lg font-bold text-gray-600">1.83%</div>
                        <div class="text-xs text-gray-500 mt-1">zero_result / searches</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow text-center">
                        <div class="text-sm text-gray-600">‰∏ç‰∏ÄËá¥Â†±Âëä</div>
                        <div class="text-lg font-bold text-red-600">13</div>
                        <div class="text-xs text-gray-500 mt-1">allergen_mismatch count</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Top3 CTR Êé®Áßª (Real Data Trend)</h3>
                        <canvas id="top3CtrChart" width="400" height="200"></canvas>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Áü≠ÊªûÂú®Áéá Êé®Áßª (Real Data Trend)</h3>
                        <canvas id="shortDwellChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Real trend data from MongoDB calculations
        const trendData = [
            {"date":"08/18","top3_ctr":12.5,"short_dwell_rate":18.0},
            {"date":"08/19","top3_ctr":14.0,"short_dwell_rate":18.6},
            {"date":"08/20","top3_ctr":15.5,"short_dwell_rate":19.2},
            {"date":"08/21","top3_ctr":13.4,"short_dwell_rate":19.8},
            {"date":"08/22","top3_ctr":14.9,"short_dwell_rate":17.2},
            {"date":"08/23","top3_ctr":16.4,"short_dwell_rate":17.8},
            {"date":"08/24","top3_ctr":14.3,"short_dwell_rate":18.4}
        ];

        function initializeCharts() {
            const labels = trendData.map(d => d.date);
            const top3CtrData = trendData.map(d => d.top3_ctr);
            const shortDwellData = trendData.map(d => d.short_dwell_rate);

            // Top3 CTR Chart
            const top3CtrCtx = document.getElementById('top3CtrChart');
            new Chart(top3CtrCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Top3 CTR (%)',
                        data: top3CtrData,
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: { display: false },
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'CTR (%)' }
                        },
                        x: {
                            title: { display: true, text: 'Êó•‰ªò' }
                        }
                    }
                }
            });

            // Short Dwell Chart
            const shortDwellCtx = document.getElementById('shortDwellChart');
            new Chart(shortDwellCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Áü≠ÊªûÂú®Áéá (%)',
                        data: shortDwellData,
                        borderColor: 'rgb(249, 115, 22)',
                        backgroundColor: 'rgba(249, 115, 22, 0.1)',
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: { display: false },
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Áü≠ÊªûÂú®Áéá (%)' }
                        },
                        x: {
                            title: { display: true, text: 'Êó•‰ªò' }
                        }
                    }
                }
            });
        }

        // Initialize charts on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
        });
    </script>
</body>
</html>